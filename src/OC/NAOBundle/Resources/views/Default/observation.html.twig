{% extends 'OCNAOBundle::layout.html.twig' %}

{% block body %}

<div class="row visible-xs">
  <div class="return">
    <a class="btn" onClick="javascript:window.history.go(-1)"><span class="glyphicon glyphicon-arrow-left"></span> RETOUR EN ARRIÈRE.</a>
    {% if observation.0.status == 0 %}
      <button type="button" class="btn btn-light">
        <a href="{{ path('ocnao_validate', {'id': observation.0.id }) }}">Valider l'observation</a>
      <a href="#">Non conforme</a>
    {% endif %}
  </div>
</div>

<div class="observation">
  <div class="container">
    <div class="row hidden-xs">
      <div class="return">
        <a class="btn" onClick="javascript:window.history.go(-1)"><span class="glyphicon glyphicon-arrow-left"></span> RETOUR EN ARRIÈRE.</a>
        {% if observation.0.status == 0 and observation.0.notconforme == 0 %}
          <a class="btn btn-success" href="{{ path('ocnao_validate', {'id': observation.0.id }) }}" role="button">Valider l'observation</a>
          <a class="btn btn-danger notconforme" role="button">Non conforme</a>
          <div class="notconformzone hidden">
            <form action="{{ path('ocnao_notconforme', {'id': observation.0.id }) }}" method="post">
              <input type="text" name="notconformetext" placeholder="Entrez ici le motif de non conformité."><br>
              <input type="submit" value="Envoyer">
            </form>
          </div>
        {% elseif observation.0.notconforme == 1 %}
          <div class="notconformezone">
            Cette observation à été declaré non conforme pour la raison suivante : {{ observation.0.notconformetext }}
          </div>
        {% endif %}
      </div>
    </div>
    <div class="row hidden-xs">
      <div class="col-xs-12"> <!-- Titre -->
        <h2>{{ observation.0.taxrefname }}</h2>
        <!-- FAMILLE A AJOUTER -->
      </div>
    </div>
    <div class="row-fluid">
      <div class="col-md-6 col-xs-12"> <!-- observateur -->
        <div class="obs_user">
          <p><span class="glyphicon glyphicon-user"></span>{{ observation.0.user.username }}</p>
          <!-- NOMBRE D'OBSERVATION A AJOUTER -->
        </div>
        <div class="photo">
          {% if observation.0.picture.image is defined %}
            <img id="photo" class="photoObservation" src=" {{ asset('uploads/picture/' ~ observation.0.picture.image) }}" alt="Photo de l'observation"/>
          {% endif %}
        </div>
        <div class="center visible-xs"> <!-- Titre -->
          <h2>{{ observation.0.taxrefname }}</h2>
          <!-- FAMILLE A AJOUTER -->
        </div>
      </div>

      <div class="col-md-6 col-xs-12">
        <div id="map">
        </div>
      </div>
    </div>
  </div>
</div>


<div id="coordonnees" class="hidden">
    <div data-latitude="{{ observation.0.latitude }}" data-longitude="{{ observation.0.longitude }}" data-username="{{ observation.0.user.username }}"></div>
</div>

<script src="{{asset("assets/js/mapObs.js")}}"></script>
<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDwjyiE5EGvQcAaJPNkxATWhrxBUsb11A&callback=initMap">
</script>

{% endblock %}
